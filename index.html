<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Física M2C - Indução Eletromagnética</title>
    
    <!-- 1. Importação do Tailwind CSS (Estilos) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. Importmap para gerenciar dependências React e Lucide -->
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "lucide-react": "https://esm.sh/lucide-react@0.303.0"
        }
    }
    </script>

    <!-- 3. Babel Standalone para compilar JSX no navegador -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Estilos Globais Customizados -->
    <style>
        body { margin: 0; overflow: hidden; background-color: #020617; color: white; font-family: ui-sans-serif, system-ui, sans-serif; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; } 
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; } 
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .text-glow { text-shadow: 0 0 20px rgba(6,182,212,0.5); }
        
        /* Animações de brilho e float */
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }
        @keyframes shimmer { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- 4. Aplicação React Completa -->
    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef, useCallback, memo } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
          ArrowRight, ArrowLeft, Zap, Magnet, Globe, Menu, X, 
          CheckCircle, AlertCircle, RefreshCw, Layers, RotateCw, BookOpen, 
          ChevronRight, ThumbsUp, GraduationCap, Activity, Wind, MousePointer2, Lightbulb
        } from 'lucide-react';

        // ==========================================
        // DADOS GLOBAIS
        // ==========================================

        const SLIDES_DATA = [
          { id: 'cover', title: 'Início' },
          { id: 'index', title: 'Roteiro' },
          { id: 'flux', title: 'Fluxo Magnético' },
          { id: 'faraday', title: 'Lei de Faraday' },
          { id: 'lenz', title: 'Lei de Lenz' },
          { id: 'sim', title: 'Laboratório' },
          { id: 'app', title: 'Aplicações' },
          { id: 'quiz', title: 'Quiz' },
          { id: 'refs', title: 'Fontes' },
          { id: 'end', title: 'Conclusão' }
        ];

        // ==========================================
        // UTILITÁRIOS (Engine Gráfica)
        // ==========================================

        const useTicker = (callback, active = true) => {
          const savedCallback = useRef(callback);
          useEffect(() => { savedCallback.current = callback; }, [callback]);

          useEffect(() => {
            if (!active) return;
            let id;
            let prevTime;
            const tick = (time) => {
              if (prevTime !== undefined) {
                const delta = time - prevTime;
                savedCallback.current(delta);
              }
              prevTime = time;
              id = requestAnimationFrame(tick);
            };
            id = requestAnimationFrame(tick);
            return () => cancelAnimationFrame(id);
          }, [active]);
        };

        const pulse = (ms = 10) => {
          if (typeof navigator !== 'undefined' && navigator.vibrate) {
            navigator.vibrate(ms);
          }
        };

        // ==========================================
        // COMPONENTES UI
        // ==========================================

        const Glass = memo(({ children, className = "", onClick, hover = false, glow = false }) => (
          <div 
            onClick={onClick}
            className={`
              relative overflow-hidden backdrop-blur-xl bg-slate-900/50 rounded-2xl border border-white/10 shadow-2xl
              ${hover ? 'transition-all duration-300 hover:bg-slate-800/60 hover:border-cyan-500/40 hover:-translate-y-1 hover:shadow-[0_10px_40px_-10px_rgba(6,182,212,0.2)] cursor-pointer' : ''}
              ${glow ? 'shadow-[0_0_30px_-5px_rgba(6,182,212,0.15)]' : ''}
              ${className}
            `}
          >
            <div className="absolute inset-0 opacity-[0.04] pointer-events-none z-0 mix-blend-overlay" 
                 style={{ backgroundImage: `url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E")` }} 
            />
            <div className="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"></div>
            <div className="absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-black/40 to-transparent"></div>
            <div className="relative z-10 h-full">{children}</div>
          </div>
        ));

        const NeoButton = memo(({ children, onClick, active = false, disabled = false, color = "cyan", className = "" }) => {
          const styles = {
            cyan: active 
              ? "bg-cyan-500 text-white shadow-[0_0_20px_rgba(6,182,212,0.5)] border-cyan-400" 
              : "bg-slate-800/80 text-slate-300 hover:bg-slate-700 hover:text-white border-white/10 hover:border-cyan-500/30",
            ghost: "bg-transparent text-slate-400 hover:text-white hover:bg-white/5 border-transparent",
          };
          return (
            <button 
              onClick={onClick} disabled={disabled}
              className={`px-6 py-3 rounded-xl font-bold border transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 ${styles[color] || styles.cyan} ${className}`}
            >
              {children}
            </button>
          );
        });

        const Badge = ({ text, color = "cyan" }) => {
          const style = color === 'amber' ? "text-amber-400 border-amber-500/30 bg-amber-500/10 shadow-[0_0_10px_rgba(245,158,11,0.1)]" : "text-cyan-400 border-cyan-500/30 bg-cyan-500/10 shadow-[0_0_10px_rgba(6,182,212,0.1)]";
          return <span className={`px-2 py-0.5 rounded text-[10px] font-black uppercase tracking-widest border ${style}`}>{text}</span>;
        };

        // ==========================================
        // SLIDES
        // ==========================================

        const CoverSlide = ({ onNext }) => (
          <div className="flex flex-col items-center justify-center h-full text-center animate-in zoom-in duration-1000 p-4 relative z-10">
            <div className="relative w-64 h-64 mb-8 group perspective-1000">
              <div className="absolute inset-0 bg-cyan-500 rounded-full blur-[100px] opacity-30 animate-pulse"></div>
              <div className="relative z-10 animate-[float_6s_ease-in-out_infinite] transform-style-3d group-hover:rotate-y-180 transition-transform duration-1000">
                <Magnet size={160} className="text-white drop-shadow-[0_20px_50px_rgba(0,0,0,0.5)] mx-auto" />
                <div className="absolute -top-4 -right-4 animate-bounce">
                   <div className="relative">
                     <div className="absolute inset-0 bg-amber-400 blur-lg opacity-50"></div>
                     <Zap size={56} className="text-amber-400 fill-amber-400 relative z-10" />
                   </div>
                </div>
              </div>
            </div>
            <h1 className="text-6xl md:text-8xl font-black text-white tracking-tighter mb-4 drop-shadow-lg">
              FÍSICA
            </h1>
            <div className="flex items-center gap-4 mb-12">
              <div className="h-px w-12 bg-gradient-to-r from-transparent to-cyan-500"></div>
              <span className="text-cyan-400 font-mono text-sm tracking-[0.3em] uppercase font-bold text-glow">Eletromagnetismo</span>
              <div className="h-px w-12 bg-gradient-to-l from-transparent to-cyan-500"></div>
            </div>
            <NeoButton onClick={onNext} active className="text-lg px-10 py-4">
              Iniciar <ArrowRight size={20} />
            </NeoButton>
          </div>
        );

        const FluxSlide = () => {
          const [angle, setAngle] = useState(0);
          const flux = Math.abs(Math.cos(angle * (Math.PI / 180)));
          const percent = Math.round(flux * 100);

          return (
            <div className="flex flex-col lg:flex-row h-full items-center justify-center gap-12 w-full max-w-6xl mx-auto">
              <div className="relative w-72 h-72 lg:w-96 lg:h-96 shrink-0 perspective-1000">
                <div className="absolute inset-0 rounded-full border border-slate-700 bg-slate-900/50 flex items-center justify-center overflow-hidden shadow-[inset_0_0_40px_rgba(0,0,0,0.5)]">
                   <div className="absolute inset-0 flex flex-col justify-evenly opacity-30">
                     {[...Array(9)].map((_,i) => (
                       <div key={i} className="w-full h-[1px] bg-cyan-400 shadow-[0_0_8px_cyan] relative overflow-hidden">
                         <div className="absolute inset-0 bg-white/50 w-1/2 animate-[shimmer_2s_linear_infinite]"></div>
                       </div>
                     ))}
                   </div>
                   <div 
                     className="w-56 h-56 rounded-full border-[8px] border-amber-500 bg-amber-500/5 shadow-[0_0_50px_rgba(245,158,11,0.3)] transition-transform duration-200 ease-out flex items-center justify-center"
                     style={{ transform: `rotateY(${angle}deg)` }}
                   >
                     <div className="absolute inset-0 bg-amber-500/10 rounded-full"></div>
                     <div className="w-32 h-1 bg-red-500 origin-left absolute top-1/2 left-1/2 flex items-center justify-end" style={{ transform: 'translateZ(20px) translateY(-50%)' }}>
                        <div className="bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded shadow-lg transform rotate-90 origin-bottom">NORMAL</div>
                     </div>
                   </div>
                </div>
                <div className="absolute bottom-4 w-full text-center text-[10px] text-slate-500 uppercase font-bold tracking-widest">Visualização 3D</div>
              </div>

              <Glass className="w-full max-w-md p-8 space-y-8">
                <div className="text-center">
                   <div className="text-xs text-slate-400 font-bold uppercase tracking-widest mb-2">Fluxo Magnético Total</div>
                   <div className={`text-7xl font-mono font-bold transition-colors drop-shadow-lg ${percent > 80 ? 'text-green-400' : percent < 10 ? 'text-red-500' : 'text-amber-400'}`}>
                     {percent}<span className="text-2xl text-white/50">%</span>
                   </div>
                </div>
                <div>
                  <div className="flex justify-between text-xs text-slate-400 mb-3 font-bold uppercase">
                    <span>Rotação</span><span className="text-cyan-400">{angle}°</span>
                  </div>
                  <input 
                    type="range" min="0" max="180" value={angle} onChange={(e) => setAngle(Number(e.target.value))}
                    className="w-full h-2 bg-slate-800 rounded-full appearance-none cursor-ew-resize accent-cyan-500 hover:accent-cyan-400 transition-all"
                  />
                  <p className="text-xs text-slate-500 mt-4 italic leading-relaxed border-l-2 border-cyan-500/30 pl-3">
                    Imagine uma janela aberta ao vento. Se a janela estiver de frente (0°), o vento passa todo. Se estiver de lado (90°), nada passa. Isso é o Fluxo.
                  </p>
                </div>
              </Glass>
            </div>
          );
        };

        const FormulaSlide = () => {
          const [hover, setHover] = useState(null);
          const INFO = {
            e: { t: "Força Eletromotriz (FEM)", d: "A 'voltagem' gerada pelo movimento.", c: "text-amber-400" },
            l: { t: "Lei de Lenz", d: "A corrente sempre luta contra a mudança (inércia).", c: "text-red-400" },
            n: { t: "Número de Espiras", d: "Multiplicador de potência. Mais voltas = Mais energia.", c: "text-purple-400" },
            f: { t: "Variação de Fluxo", d: "A mudança no campo magnético.", c: "text-cyan-400" },
            t: { t: "Tempo", d: "A rapidez. Quanto mais rápido, maior o choque.", c: "text-green-400" }
          };
          const active = hover ? INFO[hover] : null;

          return (
            <div className="flex flex-col items-center justify-center h-full gap-12 w-full max-w-5xl mx-auto">
              <Glass className="p-12 w-full text-center relative overflow-hidden group">
                <div className="absolute -inset-full top-0 block h-full w-1/2 -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-5 group-hover:animate-[shimmer_2s_infinite]" />
                
                <div className="text-5xl md:text-7xl font-mono font-bold flex flex-wrap items-center justify-center gap-4 select-none relative z-10">
                  <span onMouseEnter={()=>setHover('e')} className="hover:text-amber-400 cursor-help transition-all hover:scale-110 hover:drop-shadow-[0_0_15px_rgba(251,191,36,0.5)]">ε</span>
                  <span className="text-slate-600">=</span>
                  <span onMouseEnter={()=>setHover('l')} className="hover:text-red-400 cursor-help transition-all hover:scale-110 hover:drop-shadow-[0_0_15px_rgba(248,113,113,0.5)]">-</span>
                  <span onMouseEnter={()=>setHover('n')} className="hover:text-purple-400 cursor-help transition-all hover:scale-110 hover:drop-shadow-[0_0_15px_rgba(192,132,252,0.5)]">N</span>
                  <span className="text-slate-500 text-3xl">×</span>
                  <div className="flex flex-col items-center leading-none scale-90">
                     <span onMouseEnter={()=>setHover('f')} className="border-b-2 border-slate-600 hover:text-cyan-400 cursor-help transition-colors hover:border-cyan-400">ΔΦ</span>
                     <span onMouseEnter={()=>setHover('t')} className="hover:text-green-400 cursor-help transition-colors">Δt</span>
                  </div>
                </div>
              </Glass>

              <div className="h-32 w-full max-w-xl text-center relative">
                {active ? (
                  <div className="absolute inset-0 flex flex-col items-center justify-center animate-in slide-in-from-bottom-4 fade-in duration-300">
                    <div className={`w-16 h-16 mb-4 rounded-full bg-white/5 flex items-center justify-center border border-white/10 shadow-lg`}>
                       <Activity className={active.c} size={32} />
                    </div>
                    <h3 className={`text-xl font-bold ${active.c} mb-2`}>{active.t}</h3>
                    <p className="text-slate-300 text-lg">{active.d}</p>
                  </div>
                ) : (
                  <div className="flex flex-col items-center justify-center h-full opacity-30">
                    <MousePointer2 size={32} className="mb-2 animate-bounce" />
                    <p className="text-sm italic">Explore a fórmula com o cursor</p>
                  </div>
                )}
              </div>
            </div>
          );
        };

        const SimulationSlide = () => {
          const [loops, setLoops] = useState(2);
          const needleRef = useRef(null);
          const voltTextRef = useRef(null);
          const sliderRef = useRef(null);
          const magnetRef = useRef(null);
          const bulbRef = useRef(null);
          const bulbGlowRef = useRef(null);
          const physics = useRef({ pos: 50, prevPos: 50, volts: 0, targetVolts: 0 });

          useTicker(() => {
            const state = physics.current;
            if (sliderRef.current) state.pos = parseInt(sliderRef.current.value);

            const delta = state.pos - state.prevPos;
            const inZone = state.pos > 25 && state.pos < 75;
            
            if (inZone && Math.abs(delta) > 0.1) {
              state.targetVolts = delta * 4 * loops;
              pulse(5);
            } else {
              state.targetVolts = 0;
            }

            state.volts += (state.targetVolts - state.volts) * 0.15;
            state.prevPos = state.pos;

            if (needleRef.current) {
              const angle = Math.max(-70, Math.min(70, state.volts * 2.5));
              needleRef.current.style.transform = `translateX(-50%) rotate(${angle}deg)`;
            }
            if (magnetRef.current) magnetRef.current.style.left = `${state.pos}%`;

            if (voltTextRef.current) {
              const v = state.volts;
              if (Math.abs(v) > 0.5) {
                 voltTextRef.current.textContent = `${v.toFixed(0)} mV`;
                 voltTextRef.current.style.color = v > 0 ? '#22d3ee' : '#f87171';
              } else {
                 voltTextRef.current.textContent = "0 mV";
                 voltTextRef.current.style.color = '#64748b';
              }
            }

            if (bulbRef.current && bulbGlowRef.current) {
              const brightness = Math.min(Math.abs(state.volts) / 15, 1); 
              const color = state.volts > 0 ? '0, 255, 255' : '255, 50, 50'; 
              bulbRef.current.style.opacity = 0.2 + (brightness * 0.8);
              bulbRef.current.style.color = `rgb(${color})`;
              bulbGlowRef.current.style.opacity = brightness;
              bulbGlowRef.current.style.background = `radial-gradient(circle, rgba(${color}, 0.6) 0%, transparent 70%)`;
            }
          });

          return (
            <div className="flex flex-col h-full items-center justify-center gap-8 w-full max-w-6xl mx-auto">
              <div className="flex flex-col md:flex-row gap-12 items-center justify-center w-full">
                <div className="relative w-64 h-64 shrink-0 bg-slate-800 rounded-full border-8 border-slate-700 shadow-2xl flex items-center justify-center">
                   <div className="absolute inset-2 bg-slate-950 rounded-full shadow-inner"></div>
                   <div className="absolute top-16 left-1/2 -translate-x-1/2 flex flex-col items-center z-20">
                      <div ref={bulbGlowRef} className="absolute inset-[-20px] rounded-full pointer-events-none transition-none opacity-0"></div>
                      <Lightbulb ref={bulbRef} size={32} className="text-slate-700 transition-none" />
                   </div>
                   <div className="absolute w-full text-center bottom-16 text-xs font-mono text-slate-500 flex justify-between px-12"><span>-V</span><span>0</span><span>+V</span></div>
                   <div ref={needleRef} className="absolute bottom-1/2 left-1/2 w-1.5 h-24 bg-red-500 origin-bottom rounded-full z-10 shadow-md will-change-transform" style={{ transform: 'translateX(-50%) rotate(0deg)' }}></div>
                   <div className="absolute w-6 h-6 bg-slate-200 rounded-full z-20 shadow-lg border-2 border-slate-400"></div>
                   <div ref={voltTextRef} className="absolute bottom-10 font-mono text-2xl font-bold text-slate-500 tracking-widest">0 mV</div>
                </div>

                <div className="relative w-full max-w-lg h-56 bg-slate-900/80 rounded-3xl border border-white/10 flex items-center justify-center overflow-hidden shadow-2xl backdrop-blur-sm group">
                   <div className="absolute inset-0 opacity-5" style={{ backgroundImage: 'linear-gradient(0deg, transparent 24%, rgba(255, 255, 255, .3) 25%, rgba(255, 255, 255, .3) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, .3) 75%, rgba(255, 255, 255, .3) 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, rgba(255, 255, 255, .3) 25%, rgba(255, 255, 255, .3) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, .3) 75%, rgba(255, 255, 255, .3) 76%, transparent 77%, transparent)', backgroundSize: '30px 30px' }}></div>
                   <div className="flex gap-4 z-0 opacity-90 transition-all duration-300">
                     {[...Array(loops)].map((_, i) => (
                        <div key={i} className="w-20 h-32 border-[8px] border-amber-600 rounded-3xl bg-gradient-to-r from-amber-900/40 to-amber-600/10 shadow-[0_0_15px_rgba(245,158,11,0.2)] relative">
                           <div className="absolute inset-0 flex flex-col justify-between py-1 opacity-50">{[...Array(6)].map((_, j) => <div key={j} className="w-full h-1 bg-amber-400/30"></div>)}</div>
                        </div>
                     ))}
                   </div>
                   <div ref={magnetRef} className="absolute z-10 w-36 h-16 flex shadow-[0_20px_30px_rgba(0,0,0,0.6)] cursor-grab active:cursor-grabbing will-change-transform hover:scale-105 transition-transform duration-75 ease-out" style={{ left: '50%', transform: 'translate(-50%, 0)' }}>
                     <div className="flex-1 bg-gradient-to-br from-red-500 to-red-700 text-white flex items-center justify-center font-black text-xl rounded-l-xl border-y border-l border-white/20">N</div>
                     <div className="flex-1 bg-gradient-to-br from-slate-200 to-slate-400 text-slate-900 flex items-center justify-center font-black text-xl rounded-r-xl border-y border-r border-white/20">S</div>
                     <div className="absolute inset-0 rounded-xl shadow-[0_0_30px_rgba(255,255,255,0.1)] pointer-events-none"></div>
                   </div>
                </div>
              </div>

              <Glass className="w-full max-w-3xl p-6 flex flex-col md:flex-row gap-8 items-end" glow>
                <div className="w-full">
                   <div className="flex justify-between text-xs text-slate-400 font-bold uppercase mb-3"><span>Controle do Ímã</span><span className="text-cyan-400 animate-pulse flex items-center gap-1"><Wind size={12}/> Mova Rápido!</span></div>
                   <input ref={sliderRef} type="range" min="0" max="100" defaultValue="50" className="w-full h-6 bg-slate-800 rounded-full cursor-ew-resize accent-white hover:accent-cyan-400 transition-all appearance-none border border-white/10" />
                   <div className="flex justify-between text-[10px] text-slate-600 mt-2 font-mono uppercase"><span>Fora</span><span>Centro da Bobina</span><span>Fora</span></div>
                </div>
                <div className="w-full md:w-auto shrink-0">
                   <div className="text-xs text-slate-400 font-bold uppercase mb-2 text-center">Bobinas (N)</div>
                   <div className="flex bg-slate-800 rounded-xl p-1.5 border border-slate-700 shadow-inner">
                     {[1, 2, 3].map(n => (
                       <button key={n} onClick={() => setLoops(n)} className={`px-5 py-2.5 rounded-lg text-sm font-bold transition-all ${loops === n ? 'bg-amber-500 text-black shadow-lg scale-105' : 'text-slate-400 hover:text-white hover:bg-white/5'}`}>{n}x</button>
                     ))}
                   </div>
                </div>
              </Glass>
            </div>
          );
        };

        const QuizSlide = () => {
          const [step, setStep] = useState(0);
          const [score, setScore] = useState(0);
          const [status, setStatus] = useState('idle');

          const QUESTIONS = [
            { q: "O que é necessário para induzir corrente?", opts: ["Ímã muito forte", "Variação de Fluxo Magnético", "Fio de cobre grosso"], corr: 1, exp: "Sem variação (movimento relativo), não há indução, mesmo com ímãs fortes." },
            { q: "A Lei de Lenz afirma que a corrente induzida:", opts: ["Aquece o fio", "Acelera o ímã", "Se opõe à variação do fluxo"], corr: 2, exp: "É o princípio de conservação de energia: a natureza resiste à mudança." },
            { q: "Onde aplicamos a indução no dia a dia?", opts: ["Baterias de Carro", "Carregadores Wireless", "Lâmpadas Incandescentes"], corr: 1, exp: "Carregadores sem fio usam bobinas para transmitir energia via campo magnético." }
          ];

          const handleAnswer = (idx) => {
            const isCorrect = idx === QUESTIONS[step].corr;
            if (isCorrect) setScore(s => s + 1);
            setStatus(isCorrect ? 'correct' : 'wrong');
            pulse(isCorrect ? [50, 50, 50] : 200);
          };

          const next = () => {
            if (step < QUESTIONS.length - 1) { setStep(s => s + 1); setStatus('idle'); } else { setStatus('end'); }
          };

          if (status === 'end') return (
            <div className="text-center animate-in zoom-in duration-500">
              <div className="inline-block p-6 rounded-full bg-gradient-to-tr from-cyan-500 to-blue-600 shadow-2xl mb-6"><GraduationCap size={64} className="text-white" /></div>
              <h2 className="text-4xl font-bold text-white mb-2">Quiz Finalizado</h2>
              <p className="text-xl text-slate-300 mb-8">Sua pontuação: <strong className={score === 3 ? "text-green-400" : "text-amber-400"}>{score}</strong> de {QUESTIONS.length}</p>
              <NeoButton onClick={() => { setStep(0); setScore(0); setStatus('idle'); }}><RefreshCw size={18} /> Tentar Novamente</NeoButton>
            </div>
          );

          const q = QUESTIONS[step];

          return (
            <div className="max-w-xl w-full mx-auto">
              <div className="flex justify-between items-center mb-8">
                <Badge text={`Questão ${step + 1} / ${QUESTIONS.length}`} color="amber" />
                <div className="flex gap-1.5">{QUESTIONS.map((_,i) => <div key={i} className={`h-1.5 w-8 rounded-full transition-colors ${i <= step ? 'bg-amber-500' : 'bg-slate-800'}`}></div>)}</div>
              </div>
              <h3 className="text-2xl font-bold text-white mb-8 leading-snug">{q.q}</h3>
              <div className="space-y-4">
                {q.opts.map((opt, i) => {
                  let style = "border-white/5 bg-slate-800/40 hover:bg-slate-800 text-slate-300";
                  if (status !== 'idle') {
                     if (i === q.corr) style = "border-green-500 bg-green-500/10 text-green-200 ring-1 ring-green-500";
                     else if (status === 'wrong' && i !== q.corr) style = "opacity-40 border-transparent";
                  }
                  return <button key={i} onClick={() => status === 'idle' && handleAnswer(i)} disabled={status !== 'idle'} className={`w-full p-5 rounded-xl text-left border transition-all font-medium flex justify-between items-center ${style}`}>{opt} {status !== 'idle' && i === q.corr && <CheckCircle size={20} className="text-green-400" />}</button>;
                })}
              </div>
              {status !== 'idle' && <div className="mt-8 animate-in slide-in-from-bottom-4 fade-in"><div className={`p-5 rounded-xl mb-4 text-sm border bg-slate-900/90 backdrop-blur-md shadow-lg ${status === 'correct' ? 'border-green-500/30 text-green-100' : 'border-red-500/30 text-red-100'}`}><strong>Explicação:</strong> {q.exp}</div><NeoButton onClick={next} className="w-full" active>Próxima Pergunta <ArrowRight size={18} /></NeoButton></div>}
            </div>
          );
        };

        // ==========================================
        // APP PRINCIPAL
        // ==========================================

        const App = () => {
          const [slide, setSlide] = useState(0);
          const [menu, setMenu] = useState(false);

          const next = () => setSlide(s => Math.min(s + 1, SLIDES_DATA.length - 1));
          const prev = () => setSlide(s => Math.max(s - 1, 0));
          const goto = (i) => { setSlide(i); setMenu(false); };

          const renderContent = () => {
            switch(SLIDES_DATA[slide].id) {
              case 'cover': return <CoverSlide onNext={next} />;
              case 'index': return (
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-4xl">
                  {SLIDES_DATA.slice(1, -1).map((s, i) => (
                    <Glass key={s.id} hover onClick={() => goto(i + 1)} className="p-6 flex justify-between items-center group border-l-4 border-l-transparent hover:border-l-cyan-500">
                      <div><span className="text-xs font-bold text-slate-500 uppercase block mb-1">Módulo 0{i + 1}</span><span className="text-xl font-bold text-white group-hover:text-cyan-400 transition-colors">{s.title}</span></div>
                      <div className="w-8 h-8 rounded-full bg-white/5 flex items-center justify-center group-hover:bg-cyan-500 group-hover:text-black transition-all"><ChevronRight size={16} /></div>
                    </Glass>
                  ))}
                </div>
              );
              case 'flux': return <FluxSlide />;
              case 'faraday': return <FormulaSlide />;
              case 'lenz': return (
                <div className="flex flex-col md:flex-row gap-8 items-center justify-center h-full max-w-5xl mx-auto">
                  <div className="w-full md:w-1/2 space-y-6">
                    <div className="bg-red-500/10 border-l-4 border-red-500 p-8 rounded-r-2xl backdrop-blur-sm">
                       <h3 className="text-2xl font-bold text-white mb-3 flex items-center gap-3"><AlertCircle className="text-red-400" size={28}/> Lei de Lenz</h3>
                       <p className="text-slate-200 text-lg leading-relaxed">"A corrente induzida tem um sentido que se <strong>opõe</strong> à causa que a produziu."</p>
                    </div>
                    <p className="text-slate-400 text-sm border-l border-white/10 pl-4">É a "Inércia Eletromagnética". Sem ela, criaríamos energia do nada, violando as leis da física.</p>
                  </div>
                  <div className="w-full md:w-1/2 grid gap-4">
                     <Glass className="p-6 flex items-center gap-6"><div className="bg-slate-800 p-4 rounded-full shadow-lg"><ArrowRight className="text-cyan-400" size={24}/></div><div><strong className="text-cyan-400 block text-lg">Aproximar Ímã</strong><span className="text-sm text-slate-400">A bobina cria um campo que <strong>EMPURRA</strong> de volta.</span></div></Glass>
                     <Glass className="p-6 flex items-center gap-6"><div className="bg-slate-800 p-4 rounded-full shadow-lg"><ArrowLeft className="text-amber-400" size={24}/></div><div><strong className="text-amber-400 block text-lg">Afastar Ímã</strong><span className="text-sm text-slate-400">A bobina cria um campo que <strong>PUXA</strong> de volta.</span></div></Glass>
                  </div>
                </div>
              );
              case 'sim': return <SimulationSlide />;
              case 'app': return (
                <div className="grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-6xl">
                  {[
                    { t: "Usinas", d: "Turbinas gigantes giram ímãs para gerar energia para cidades.", i: Zap, c: "text-cyan-400", b: "border-cyan-500" },
                    { t: "Transformadores", d: "Alteram a voltagem (110V/220V) usando apenas indução.", i: Layers, c: "text-amber-400", b: "border-amber-500" },
                    { t: "Indução", d: "Carregadores sem fio e fogões transferem energia pelo ar.", i: Activity, c: "text-purple-400", b: "border-purple-500" }
                  ].map((x, i) => (
                    <Glass key={i} hover className={`p-8 text-center border-t-4 ${x.b}`}>
                      <div className="bg-white/5 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-inner"><x.i size={32} className={x.c} /></div>
                      <h4 className="font-bold text-white text-xl mb-3">{x.t}</h4>
                      <p className="text-slate-400 text-sm leading-relaxed">{x.d}</p>
                    </Glass>
                  ))}
                </div>
              );
              case 'quiz': return <QuizSlide />;
              case 'refs': return (
                <div className="max-w-2xl w-full space-y-6">
                   <Glass className="p-8">
                     <h3 className="text-2xl font-bold text-white mb-6 flex items-center gap-3 border-b border-white/10 pb-4"><BookOpen className="text-cyan-400"/> Webgrafia</h3>
                     <div className="space-y-4">
                       {[ { n: "Khan Academy", u: "Fluxo Magnético e Faraday" }, { n: "Só Física", u: "Eletromagnetismo Teórico" }, { n: "Manual do Mundo", u: "Geradores Caseiros" } ].map((r, i) => (
                         <div key={i} className="flex items-center gap-4 group cursor-pointer">
                           <Globe className="text-slate-500 group-hover:text-cyan-400 transition-colors" size={20}/>
                           <div><strong className="block text-slate-200 group-hover:text-white transition-colors">{r.n}</strong><span className="text-xs text-slate-500 font-mono">{r.u}</span></div>
                         </div>
                       ))}
                     </div>
                   </Glass>
                </div>
              );
              case 'end': return (
                <div className="text-center animate-in zoom-in duration-700">
                   <div className="w-24 h-24 bg-gradient-to-tr from-cyan-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-8 shadow-[0_0_50px_rgba(6,182,212,0.4)]"><ThumbsUp className="text-white" size={48} /></div>
                   <h2 className="text-5xl font-black text-white mb-4">Obrigado!</h2>
                   <p className="text-slate-400 text-lg italic mb-12">"A natureza é nossa professora."</p>
                   <NeoButton onClick={() => goto(0)} color="ghost"><RefreshCw size={16}/> Reiniciar Apresentação</NeoButton>
                </div>
              );
              default: return null;
            }
          };

          return (
            <div className="fixed inset-0 bg-slate-950 text-slate-100 font-sans overflow-hidden flex flex-col select-none">
              <div className="absolute inset-0 pointer-events-none z-0">
                 <div className="absolute top-[-20%] left-[-10%] w-[80vw] h-[80vw] bg-cyan-900/20 rounded-full blur-[120px]"></div>
                 <div className="absolute bottom-[-20%] right-[-10%] w-[80vw] h-[80vw] bg-blue-900/10 rounded-full blur-[120px]"></div>
                 <div className="absolute inset-0 opacity-[0.03] bg-repeat" style={{ backgroundImage: `url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.6' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E")` }}></div>
              </div>

              <header className="h-16 shrink-0 z-50 flex justify-between items-center px-6 border-b border-white/5 bg-slate-950/80 backdrop-blur-xl">
                <div className="flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity" onClick={() => goto(0)}>
                   <div className="w-8 h-8 rounded-lg bg-gradient-to-br from-cyan-600 to-blue-600 flex items-center justify-center shadow-lg shadow-cyan-900/20"><Magnet size={18} className="text-white"/></div>
                   <span className="font-bold tracking-wide text-sm hidden sm:block text-slate-200">FÍSICA</span>
                </div>
                <button onClick={() => setMenu(true)} className="p-2 text-slate-300 hover:bg-white/10 rounded-lg transition-colors"><Menu size={24} /></button>
              </header>

              <main className="flex-grow overflow-y-auto overflow-x-hidden px-4 py-6 relative z-10 custom-scrollbar">
                 <div className="max-w-6xl mx-auto h-full flex flex-col">
                    {SLIDES_DATA[slide].id !== 'cover' && SLIDES_DATA[slide].id !== 'end' && (
                       <div className="mb-8 border-b border-white/5 pb-4 shrink-0 animate-in slide-in-from-left-4 fade-in duration-500 flex items-end gap-4">
                          <h2 className="text-3xl md:text-4xl font-black text-white tracking-tight">{SLIDES_DATA[slide].title}</h2>
                          <span className="text-xs text-slate-500 font-mono mb-1.5 opacity-50">0{slide}/{SLIDES_DATA.length - 1}</span>
                       </div>
                    )}
                    <div className="flex-grow flex flex-col justify-center items-center w-full animate-in fade-in duration-500">
                       {renderContent()}
                    </div>
                 </div>
              </main>

              <footer className="h-20 shrink-0 z-50 border-t border-white/5 bg-slate-950/90 backdrop-blur-xl flex items-center justify-center px-6">
                 <div className="w-full max-w-4xl flex items-center justify-between gap-6">
                    <button onClick={prev} disabled={slide === 0} className="w-12 h-12 rounded-full border border-slate-700 flex items-center justify-center text-slate-400 hover:bg-slate-800 hover:text-white disabled:opacity-30 transition-all active:scale-95"><ArrowLeft size={20}/></button>
                    <div className="flex gap-1.5 overflow-hidden px-2 h-1.5 rounded-full bg-slate-900/50 border border-white/5 p-0.5">
                       {SLIDES_DATA.map((_, i) => (
                          <div key={i} className={`h-full rounded-full transition-all duration-500 ease-out ${i === slide ? 'w-8 bg-cyan-500 shadow-[0_0_10px_cyan]' : 'w-1.5 bg-slate-700'}`}></div>
                       ))}
                    </div>
                    <button onClick={next} disabled={slide === SLIDES_DATA.length - 1} className="w-12 h-12 rounded-full bg-cyan-600 hover:bg-cyan-500 flex items-center justify-center text-white disabled:opacity-30 shadow-lg shadow-cyan-900/30 transition-all active:scale-95"><ArrowRight size={20}/></button>
                 </div>
              </footer>

              <div className={`fixed inset-y-0 right-0 w-80 bg-slate-900 border-l border-slate-700 shadow-2xl transform transition-transform duration-300 z-[60] p-6 ${menu ? 'translate-x-0' : 'translate-x-full'}`}>
                 <div className="flex justify-between items-center mb-8">
                    <span className="text-xs font-bold text-slate-500 uppercase tracking-widest">Navegação</span>
                    <button onClick={() => setMenu(false)} className="hover:text-white text-slate-400"><X size={24}/></button>
                 </div>
                 <nav className="space-y-1 overflow-y-auto h-[calc(100%-4rem)] custom-scrollbar">
                    {SLIDES_DATA.map((s, i) => (
                       <button key={i} onClick={() => goto(i)} className={`w-full text-left px-4 py-3 rounded-xl text-sm font-medium flex justify-between items-center group transition-all ${slide === i ? 'bg-cyan-500/10 text-cyan-400 border border-cyan-500/20' : 'text-slate-400 hover:bg-white/5 hover:text-white'}`}>
                          <span>{s.title}</span>
                          {slide === i && <div className="w-2 h-2 rounded-full bg-cyan-400 shadow-[0_0_10px_cyan]"></div>}
                       </button>
                    ))}
                 </nav>
              </div>
            </div>
          );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>